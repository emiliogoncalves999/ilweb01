(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1275],{24654:function(){},914:function(e,t,l){"use strict";l.d(t,{z:function(){return n}});var r=l(57437),a=l(31355);let n=()=>(0,r.jsx)("div",{className:"flex h-full min-h-[520px] w-full flex-1 items-center justify-center",children:(0,r.jsx)("div",{className:"aspect-square max-h-full overflow-hidden rounded bg-neutral-30 object-contain transition-all duration-500 dark:bg-neutral-900",children:(0,r.jsx)(a.V,{})})})},42395:function(e,t,l){"use strict";l.d(t,{FromTextFormProvider:function(){return C},K:function(){return N}});var r=l(57437),a=l(31014),n=l(16463),i=l(97334),s=l.n(i),o=l(2265),c=l(39343),u=l(91606),d=l(41926),m=l(14976),x=l(43897),g=l(59772),p=l(84977);let f=g.z.object({...p.q,random_prompt_clicked:g.z.boolean().optional().default(!1)});var v=l(5672),h=l(82074),y=l(10733),_=l(47802);let{ASPECT_RATIO:j}=d.TOOLS_SETTINGS,I=new Set(Object.values(j.content).map(e=>{let{value:t}=e;return t})),C=e=>{var t,l;let i,{children:d,isCanvas:g}=e,p=(0,n.useSearchParams)(),{fromText:j}=(0,y.Td)()(e=>e.defaultSettings),C=(0,x.HO)(j.styleListId),N=(0,x.VI)(j.modelListId);try{let{feed_item:e}=s().parse(p.toString());i=e}catch(e){i=null}let S=(0,x.HO)(Number(null!==(t=null==i?void 0:i.styleId)&&void 0!==t?t:-1)),k=(0,x.Qp)(null!==(l=null==i?void 0:i.model)&&void 0!==l?l:"None"),T=(0,c.cI)({resolver:(0,a.F)(f),defaultValues:{...j,style:C,model:N,random_prompt_clicked:!1},mode:"onChange"}),w=(0,h.p)(e=>e.persistedFromTextSetting),b=(0,m.h)(v.cg),E=(0,m.h)(v.TI),O=g?b:E,L=(0,u.O_)();return(0,o.useEffect)(()=>{if(!L)return;if(!O){if(!w){T.setValue("style",C),N&&T.setValue("model",N);let e=(0,_.ER)();e&&T.setValue("prompt",e);return}let e=(0,_.ER)();e?T.reset({...w,prompt:e}):T.reset({...w});return}let{settings:{num_images:e,...t}}=O,l=T.getValues("num_images");null==T||T.reset({...t,num_images:l})},[O,T,C,N,L]),(0,o.useEffect)(()=>{if(!L||!i)return;let e=I.has(i.aspectRatio);T.setValue("prompt",i.prompt),T.setValue("style",-1===S.id?C:S),T.setValue("model",k),T.setValue("high_res_results",(null==i?void 0:i.highResResults)==="true"),T.setValue("aspect_ratio",e?i.aspectRatio:j.aspect_ratio),T.setValue("cfg",i.cfgScale?Number(i.cfgScale):j.cfg),T.setValue("seed",i.seed?Number(i.seed):void 0)},[T,L]),(0,r.jsx)(c.RV,{...T,children:d})},N=()=>{let e=(0,c.Gc)();return(0,o.useMemo)(()=>({formHook:e}),[e])}},31355:function(e,t,l){"use strict";l.d(t,{V:function(){return a}});var r=l(57437);let a=e=>{let{className:t}=e;return(0,r.jsxs)("svg",{width:"500",height:"500",fill:"none",viewBox:"0 0 500 500",className:t,children:[(0,r.jsxs)("g",{clipPath:"url(#IllustrationBackground_a)",className:"dark:opacity-50",children:[(0,r.jsx)("path",{fill:"currentColor",className:"text-neutral-40 transition-all duration-500 dark:text-neutral-700",d:"m100.648 320.362-26.545 13.856a.461.461 0 0 0-.136.711l19.578 22.673a.462.462 0 0 0 .433.152l28.884-5.361a.462.462 0 0 0 .293-.719l-21.915-31.168a.463.463 0 0 0-.592-.144ZM195.013 327.117l-33.971 28.1c-.165.136-.247.204-.291.298-.044.093-.044.2-.044.413v24.251c0 .442 0 .662.138.798s.359.132.8.125l312.452-5.06c.108-.002.162-.002.213-.015.052-.013.1-.038.196-.087l24.819-12.801c.244-.126.366-.189.433-.299.067-.111.067-.248.067-.522v-78.294c0-1.981 0-2.971-.38-3.039-.381-.068-.723.861-1.409 2.719l-11.898 32.237c-.172.466-.258.7-.456.774-.198.074-.416-.045-.852-.283l-8.916-4.86c-.348-.19-.522-.285-.695-.243-.173.042-.285.205-.509.533l-28.782 42.112c-.123.18-.185.27-.276.322-.091.053-.199.061-.416.078l-80.503 6.177a.934.934 0 0 1-.273.001.947.947 0 0 1-.247-.115l-47.725-26.62c-.221-.124-.332-.185-.453-.185s-.231.063-.452.188l-37.714 21.37c-.259.147-.389.221-.529.211-.14-.01-.257-.102-.493-.286l-20.61-16.047c-.124-.096-.186-.144-.259-.17-.073-.025-.152-.025-.309-.025h-9.017c-.19 0-.284 0-.37-.035-.085-.035-.152-.103-.285-.237l-24.015-24.179c-.331-.332-.496-.499-.698-.491-.202.007-.354.185-.659.541l-15.777 18.415c-.274.32-.411.48-.597.498-.185.017-.35-.114-.68-.377l-7.394-5.901c-.281-.224-.421-.336-.585-.335-.164.002-.302.116-.579.345Z"}),(0,r.jsx)("path",{fill:"currentColor",className:"text-neutral-50 transition-all duration-500 dark:text-neutral-600",d:"m50.162 307.411-26.89 33.338c-.255.315-.381.472-.37.652.013.181.16.32.453.598l56.994 54.019c.173.164.26.246.37.277.11.031.226.006.459-.044l43.443-9.291c.167-.036.25-.053.332-.041.083.012.157.053.307.135l72.849 40.127c.293.161.439.242.592.22.152-.022.27-.14.507-.376l15.3-15.318c.171-.171.256-.257.367-.291.111-.033.229-.01.467.038l31.825 6.338c.072.014.108.021.144.023a.985.985 0 0 0 .146-.012l98.647-11.74c.066-.007.098-.011.131-.01.033 0 .065.006.13.017l49.377 8.238c.15.025.225.037.298.026.074-.012.142-.047.277-.116l77.283-39.799c.416-.214.624-.322.678-.516.054-.195-.07-.394-.317-.792l-30.838-49.665c-.335-.539-.502-.808-.751-.815-.248-.006-.429.254-.791.774l-20.473 29.427c-.121.174-.182.261-.27.312-.089.052-.194.061-.405.08l-99.1 8.925c-.215.019-.322.029-.419-.007-.098-.036-.173-.113-.324-.267l-13.803-14.09c-.376-.383-.564-.575-.786-.552-.222.023-.366.25-.653.704l-14.799 23.361c-.178.282-.268.423-.412.477-.144.055-.304.008-.625-.084l-55.537-16.089c-.185-.053-.277-.08-.37-.069-.093.011-.176.059-.343.154l-28.081 15.975c-.191.109-.287.163-.393.17-.106.007-.208-.035-.412-.118l-60.43-24.662c-.122-.049-.182-.074-.247-.081a.97.97 0 0 0-.258.026l-49.213 8.41c-.249.042-.373.064-.487.023-.113-.04-.197-.135-.363-.325l-41.803-47.723c-.335-.383-.503-.575-.718-.571-.215.005-.375.203-.695.6Z"}),(0,r.jsx)("ellipse",{cx:"276.117",cy:"274.795",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.259",ry:"1.675"}),(0,r.jsx)("ellipse",{cx:"230.129",cy:"152.124",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.215",ry:"1.616"}),(0,r.jsx)("ellipse",{cx:"74.627",cy:"232.456",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".868",ry:"1.154"}),(0,r.jsx)("ellipse",{cx:"93.699",cy:"46.815",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".787",ry:"1.047"}),(0,r.jsx)("ellipse",{cx:"455.001",cy:"89.271",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".472",ry:".628"}),(0,r.jsx)("ellipse",{cx:"35.355",cy:"71.265",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".472",ry:".628"}),(0,r.jsx)("ellipse",{cx:"29.457",cy:"241.625",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".472",ry:".628"}),(0,r.jsx)("ellipse",{cx:"305.212",cy:"196.128",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"106.669",cy:"72.859",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"140.684",cy:"319.397",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"152.485",cy:"132.416",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"440.581",cy:"40.08",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"273.973",cy:"140.265",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"156.305",cy:"330.939",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"228.218",cy:"238.227",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".694",ry:".923"}),(0,r.jsx)("ellipse",{cx:"249.958",cy:"328.544",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.259",ry:"1.675"}),(0,r.jsx)("ellipse",{cx:"21.564",cy:"314.232",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.259",ry:"1.675"}),(0,r.jsx)("ellipse",{cx:"128.955",cy:"20.856",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.102",ry:"1.465"}),(0,r.jsx)("ellipse",{cx:"36.713",cy:"182.025",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".787",ry:"1.047"}),(0,r.jsx)("ellipse",{cx:"156.971",cy:"209.688",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.102",ry:"1.465"}),(0,r.jsx)("ellipse",{cx:"372.674",cy:"91.955",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.102",ry:"1.465"}),(0,r.jsx)("ellipse",{cx:"278.61",cy:"12.084",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.102",ry:"1.465"}),(0,r.jsx)("ellipse",{cx:"453.314",cy:"297.553",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".521",ry:".693"}),(0,r.jsx)("ellipse",{cx:"490.532",cy:"179.926",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".944",ry:"1.256"}),(0,r.jsx)("ellipse",{cx:"488.796",cy:"13.26",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".944",ry:"1.256"}),(0,r.jsx)("ellipse",{cx:"214.585",cy:"55.273",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".944",ry:"1.256"}),(0,r.jsx)("ellipse",{cx:"116.892",cy:"289.136",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".787",ry:"1.047"}),(0,r.jsx)("ellipse",{cx:"67.1",cy:"134.113",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".63",ry:".837"}),(0,r.jsx)("ellipse",{cx:"451.233",cy:"212.142",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".868",ry:"1.154"}),(0,r.jsx)("ellipse",{cx:"383.719",cy:"67.867",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.041",ry:"1.385"}),(0,r.jsx)("ellipse",{cx:"396.218",cy:"312.096",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:".694",ry:".923"}),(0,r.jsx)("ellipse",{cx:"375.071",cy:"196.252",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.417",ry:"1.884"}),(0,r.jsx)("ellipse",{cx:"350.399",cy:"326.408",fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",rx:"1.041",ry:"1.385"}),(0,r.jsx)("path",{fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",d:"M80.464 393.281 1.559 318.478c-.667-.632-1-.948-1.28-.828-.279.12-.279.579-.279 1.498v179.929c0 .435 0 .653.135.788s.353.135.788.135h197.154c.435 0 .653 0 .788-.135s.135-.353.135-.788v-73.991c0-.267 0-.4-.065-.509-.064-.109-.181-.173-.415-.301l-73.084-39.958c-.149-.081-.223-.122-.305-.134-.082-.012-.165.006-.331.041l-43.508 9.289c-.233.05-.35.074-.46.044-.109-.031-.195-.113-.368-.277Z"}),(0,r.jsx)("path",{fill:"currentColor",className:"text-neutral-60 transition-all duration-500 dark:text-neutral-500",d:"m214.456 394.177-90.135 104.294c-.57.66-.854.989-.731 1.259.124.269.559.269 1.43.269l374.057-.267c.435 0 .653 0 .788-.135.135-.136.135-.353.135-.788v-162.18c0-.722 0-1.084-.234-1.216-.234-.133-.544.053-1.164.424l-102.269 61.225c-.15.09-.225.135-.309.15-.084.015-.169-.002-.341-.035l-49.318-9.562a.908.908 0 0 0-.151-.023.983.983 0 0 0-.151.014l-98.616 13.639a1.023 1.023 0 0 1-.169.016c-.042-.002-.083-.012-.166-.031l-31.749-7.348c-.265-.061-.397-.092-.519-.052s-.211.142-.388.347Z"}),(0,r.jsx)("path",{fill:"currentColor",className:"text-neutral-80 transition-all duration-500 dark:text-neutral-400",d:"m214.854 471.978-59.019 26.252c-1.554.691-2.331 1.037-2.254 1.403.078.366.929.365 2.63.364l342.865-.249c.435 0 .652 0 .787-.135.136-.136.136-.353.136-.788V382.744c0-.63 0-.946-.208-1.083-.207-.137-.497-.013-1.077.234l-79.149 33.673c-.133.056-.199.084-.27.091-.071.007-.141-.008-.282-.038l-71.061-15.017c-.164-.034-.246-.052-.327-.04-.081.012-.155.051-.302.131l-132.469 71.283Z"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"IllustrationBackground_a",children:(0,r.jsx)("rect",{width:"500",height:"500",fill:"currentColor",className:"text-neutral-0 transition-all duration-500",rx:"4"})})})]})}},35093:function(e,t,l){"use strict";l.d(t,{FromTextContent:function(){return $}});var r=l(57437),a=l(2265),n=l(914),i=l(52247),s=l(41926),o=l(42395),c=l(32057),u=l(87483),d=l(14976),m=l(21803),x=l(89565),g=l(16092),p=l(47802);let f=async e=>{let t;return e.data.seed||(t=(0,p.X4)()),(0,g.o)(e.data,e.isPremium,t)},v=()=>{let e=(0,x.useMutation)(f);return Object.assign(e,{cancelRequest:()=>{e.isLoading&&(0,g.C)()}})};var h=l(72143),y=l(8127),_=l(54795);let j=async(e,t,l)=>{var r;if(!l)throw Error("No image provided");let a={image:await (0,y.K$)(l),prompt:null!==(r=e.prompt)&&void 0!==r?r:"",style_id:e.model.model_id,seed:t};return(null==e?void 0:e.cfg)&&(a.cfg=null==e?void 0:e.cfg),(null==e?void 0:e.steps)&&(a.steps=null==e?void 0:e.steps),(null==e?void 0:e.strength)&&(a.strength=null==e?void 0:e.strength),(null==e?void 0:e.negative_prompt)&&(a.negative_prompt=null==e?void 0:e.negative_prompt),(0,p.wh)(a)},I=async(e,t,l,r)=>{let a=await j(e,r,t),{data:n}=await h.p.post(_.TG.VARIATE,{body:a,headers:(0,_.kw)(l)},{throwOnError:!0});return(0,y.RJ)(n)},C=()=>(0,x.useMutation)(e=>I(e.settings,e.imgSrc,e.isPremium,e.randomSeed));var N=l(5672),S=l(10733),k=l(81750),T=l(24827),w=l(14125),b=l(29328),E=l(82442),O=l(24528),L=l(69085),R=l(60818),A=l(31355),V=l(30606),M=l(16463),P=l(80732),F=l(25701),G=l(24019),U=l(63218),B=l(96994),H=l(37079),D=l(6498),K=l(72811);let X=()=>{var e;let{formHook:t}=(0,o.K)(),{isLoading:l,data:r}=(0,D.X)(),a=0;if(l)return{cost:a};let n=null==r?void 0:r[_.TG.FROM_TEXT];if(!n)return{cost:a};let{criteria:i}=n,s=t.watch("model"),c=t.watch("num_images"),u=t.watch("high_res_results");return{cost:(a+=(0,K.l)(i,s)+(0,K.p)(i,u,s)+(null!==(e=n.base)&&void 0!==e?e:0))*c}};var Z=l(85951);let z=e=>{var t,l,n,i,s,u,d;let{isPremium:m,generateImageMutation:x}=e,g=(0,M.usePathname)(),{aggregator:p}=(0,Z.O)(),{isRenderedInsideCanvas:f}=(0,c.B)(),v=f?N.cg:N.TI,h=v(e=>e.addImageToCollectionWithLoading),y=v(e=>e.completeImageGenerationLoading),_=v(e=>e.deleteLoadingImage),{cost:j}=X(),{formHook:I}=(0,o.K)(),C=(0,M.useRouter)(),S=(0,k.m8)()(e=>e.user),{data:T}=(0,D.j)(),O=(0,k.m8)()(e=>e.subscription),L=(0,w.L)(O),R=null!==(u=null===(n=L.stripeSubscription)||void 0===n?void 0:null===(l=n.StripePrice)||void 0===l?void 0:null===(t=l.StripeProduct)||void 0===t?void 0:t.name)&&void 0!==u?u:"Free",A=null!==(d=null===(s=L.stripeSubscription)||void 0===s?void 0:null===(i=s.StripePrice)||void 0===i?void 0:i.billingInterval)&&void 0!==d?d:"Free",V=L.isSubscriptionActive?"Premium":"Free",K=f?"Canvas":"Dashboard",{page:z,source:q}=(0,B.V)(),$=(0,a.useRef)(0),Q=(null==T?void 0:T.platformSpecificTotal)?T.platformSpecificTotal-j:0,W=(0,a.useCallback)(async e=>{let t=h(e);try{let l=await x.mutateAsync({data:e,isPremium:m});if(!l)throw Error("Processing stopped");return y({image:l,imageId:t.imageId}),{isSuccess:!0}}catch(e){return _(t.imageId),(0,b.eL)(e,m),{isSuccess:!1,error:e}}},[h,y,_,x,m]),J=(0,M.useSearchParams)().get("generate"),Y=(0,a.useCallback)(async e=>{var t,l,r;let a;if(!e.prompt){E.Am.error("Please enter a prompt");return}if(!S){let e=new URLSearchParams({redirect:"".concat(g,"?generate=true")});C.push("".concat(U.H7.TOOLS_AUTH,"?").concat(e));return}let n=await Promise.all(Array.from({length:e.num_images}).map(()=>W(e))),i=n.reduce((e,t)=>{let l=e.successCount,r=e.failureCount,a=e.error;return t.isSuccess?l++:(a=t.error,r++),{...e,successCount:l,failureCount:r,error:a}},{successCount:0,failureCount:0,totalCount:n.length,error:Error("Default")}),s=Object.values(e.tags).map(e=>Array.from(e)).flat().join(","),o=Object.entries(e.tags).filter(e=>{let[t,l]=e;return l.size>0}).map(e=>{let[t,l]=e;return t}).join(",");$.current+=e.num_images;let c={source:q,feature:F.L.TEXT_TO_IMAGE,page_name:z,aspect_ratio:e.aspect_ratio,number_of_images:e.num_images,cfg_scale:e.cfg,hdr_enabled:e.high_res_results&&e.model.hdr_toggle,model_id:e.model.id,model_used:e.model.name,style_used:null===(t=e.style)||void 0===t?void 0:t.style_name,negative_prompt_length:null===(l=e.negative_prompt)||void 0===l?void 0:l.length,seed:e.seed,tokens_remaining:Q,user_account_status:V,user_plan:R,user_plan_period:A,prompt_length:null===(r=e.prompt)||void 0===r?void 0:r.length,tag_used:s.length?s:"NA",tag_category:o.length?o:"NA",generation_source:K,random_prompt_used:e.random_prompt_clicked};a=i.totalCount===i.successCount?{processing_status:"Successful"}:0===i.successCount?{processing_status:"Failure",processing_error:(0,b.t$)(i.error)}:{processing_status:"Partial",processing_error:(0,b.t$)(i.error)},p.log(P.H.mixpanel.image_generated.withProperties({...c,email:null==S?void 0:S.email,distinct_id:null==S?void 0:S.id,negative_prompt_used:!!e.negative_prompt,...a})),p.log(P.H.clevertap.image_generated.withProperties({...c,session_text_to_image:$.current,...a})),I.setValue("random_prompt_clicked",!1)},[C,Q,S,g,W,p,I,K,z,q,R,A,V]),ee=I.getValues("prompt");return(0,a.useEffect)(()=>{if("true"===J&&ee&&S){I.handleSubmit(Y)();let e=new URLSearchParams(window.location.search);e.delete("generate"),C.replace("".concat(g,"?").concat(e.toString()))}},[ee,S,g]),(0,r.jsx)("form",{onSubmit:I.handleSubmit(Y),children:(0,r.jsx)(H.w,{tagPopoverControlArgs:{control:I.control,name:"tags"},promptFormHook:{tokenCost:j,generateBtnId:G.i.GENERATE_BTN_ID,formHook:I,name:"prompt",isLoading:x.isLoading,onCancel:x.cancelRequest}})})},q=()=>(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"flex max-h-[413px] min-h-[413px] w-full items-center justify-center overflow-hidden rounded-xl bg-neutral-30 object-contain transition-all duration-500 dark:bg-neutral-800",children:(0,r.jsx)(A.V,{className:"h-full w-full"})})}),$=e=>{let{className:t=""}=e,l=(0,k.m8)()(e=>e.subscription),{isSubscriptionActive:x}=(0,w.L)(l),{isRenderedInsideCanvas:g}=(0,c.B)(),f=g?N.cg:N.TI,{collections:h,setSelectedCollection:y}=f(e=>e),{enhance:_}=(0,S.Td)()(e=>e.defaultSettings),j=f(e=>e.deleteImage),I=f(e=>e.setImageLoading),A=f(e=>e.setImagesUpscale),M=(0,d.h)(f),P=f(e=>e.completeImageGenerationLoading),F=f(e=>e.deleteLoadingImage),G=f(e=>e.addImageToCollectionWithLoading),U=f(e=>e.setFocusOfOriginalImage),[B,H]=(0,a.useState)({isModalOpen:!1,initialImageIndex:0}),D=(0,m.e)(),K=C(),{formHook:X}=(0,o.K)(),Z=X.watch("num_images"),$=async(e,t)=>{I(e,!0);let l=null==M?void 0:M.images.find(t=>t.id===e);if(!l)throw Error("Image not found");try{let r=await D.mutateAsync({..._,...null!=t?t:{},isPremium:x,originalImgSrc:l.src});A(e,r,!0),E.Am.success("Upscaled successfully")}catch(e){(0,b.eL)(e,x)}I(e,!1)},Q=(0,a.useCallback)(async e=>{let t=null==M?void 0:M.images.find(t=>t.id===e);if(!t)throw Error("Image not found");let l=null==M?void 0:M.settings;if(!l){E.Am.error("Please generate an image first and then variate it");return}let r=G(l,t),a=(0,p.X4)();try{let e=await K.mutateAsync({isPremium:x,imgSrc:t.src,settings:l,randomSeed:a});if(!e){E.Am.error("Processing stopped"),F(r.imageId);return}let n=[{src:e,randomSeed:a}];P({image:n[0],imageId:r.imageId})}catch(e){F(r.imageId),(0,b.eL)(e,x)}},[G,P,F,x,M,K]),W=()=>{H({isModalOpen:!1,initialImageIndex:0})},J=e=>{j(e)},{images:Y}=null!=M?M:{images:[]},ee=X.watch("aspect_ratio"),et=v(),el=!(0,N.yn)(null==M?void 0:M.settings,X.getValues()),er=g?u.G:V.U;return(0,r.jsxs)("div",{className:(0,O.cn)("hide-scrollbar relative flex h-screen flex-col gap-[34px] overflow-y-auto overflow-x-hidden px-9 py-6",t),children:[(0,r.jsx)(er,{numOfImages:Z,renderNoImages:g?q:n.z,isVariationSupported:!0,selectedCollection:M,aspectRatio:ee,handleDeleteImage:J,handleUpscale:$,isUserPremium:x,images:Y,isLoading:et.isLoading,isVariationLoading:K.isLoading,isSettingsChanged:el,handleFullView:e=>{let t=null==M?void 0:M.images.findIndex(t=>t.id===e);void 0!==t&&H({isModalOpen:!0,initialImageIndex:t})},handleImageVariate:Q,handleFocusOriginalImage:e=>{var t;e&&(null===(t=document.getElementById(e))||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),null==U||U(e,!0),setTimeout(()=>{null==U||U(e,!1)},2500))},collections:h,setSelectedCollection:y}),(0,r.jsx)(z,{generateImageMutation:et,isPremium:x}),!g&&M&&(0,r.jsx)(L.h,{closeFullViewModal:W,isFullViewOpen:B.isModalOpen,children:(0,r.jsx)(R.c,{collection:M,getSettingItems:e=>{var t,l,r,a,n;return[{title:"Model",value:null==M?void 0:null===(t=M.settings.model)||void 0===t?void 0:t.name,image:"".concat(i.v.REMOTE_CONFIG_CDN).concat(null==M?void 0:null===(l=M.settings.model)||void 0===l?void 0:l.thumb)},{title:"Art Style",value:null==M?void 0:null===(r=M.settings.style)||void 0===r?void 0:r.style_name,image:(null==M?void 0:null===(a=M.settings.style)||void 0===a?void 0:a.id)===-1?null:"".concat(i.v.REMOTE_CONFIG_CDN).concat(null==M?void 0:null===(n=M.settings.style)||void 0===n?void 0:n.style_thumb)},{title:"Aspect Ratio",value:null==M?void 0:M.settings.aspect_ratio,Icon:(0,T.o)(Object.values(s.TOOLS_SETTINGS.ASPECT_RATIO.content),null==M?void 0:M.settings.aspect_ratio)},{title:"Seed",value:e.randomSeed||(null==M?void 0:M.settings.seed)},{title:"CFG Scale",value:null==M?void 0:M.settings.cfg}]},handleDeleteImage:J,closeFullViewModal:W,initialImageIndex:B.initialImageIndex,handleImageUpscale:$})})]})}},79294:function(e,t,l){"use strict";l.d(t,{m:function(){return v}});var r=l(57437),a=l(2265),n=l(24019),i=l(41926),s=l(42395),o=l(32057),c=l(43897),u=l(10733),d=l(81750),m=l(43664),x=l(24528),g=l(76912);let{ASPECT_RATIO:p}=i.TOOLS_SETTINGS,f=p.content,v=e=>{let{isSubscriptionActive:t}=e,{isRenderedInsideCanvas:l,modalContainer:i,activeTool:p}=(0,o.B)(),{formHook:v}=(0,s.K)(),h=(0,d.m8)()(e=>e.favoriteStyles),y=(0,u.Td)()(e=>e.styles),_=(0,u.Td)()(e=>e.popularStyles),{fromText:j}=(0,u.Td)()(e=>e.defaultSettings),I=(0,c.HO)(j.styleListId),C=(0,c.VI)(j.modelListId),N=(0,d.m8)()(e=>e.favoriteModels),S=(0,u.Td)()(e=>e.models),k=(0,u.Td)()(e=>e.modelAspectRatioInclusionList),T=(0,u.Td)()(e=>e.popularModels),w=(0,d.m8)()(e=>e.toggleFavorite),b=v.watch("model"),E=v.watch("aspect_ratio"),O=b.model_id,L=(0,a.useMemo)(()=>{let e=k.find(e=>O>=e.minModelId&&O<=e.maxModelId);if(!e)return f;let t=new Set(e.aspectRatioInclusionList);return Object.fromEntries(Object.entries(f).filter(e=>{let[l]=e;return t.has(l)}))},[O,k]);return(0,a.useEffect)(()=>{var e;L[E]||v.setValue("aspect_ratio",null==L?void 0:null===(e=L["1:1"])||void 0===e?void 0:e.value)},[L,E,v]),(0,r.jsxs)(g.Rp.Root,{className:(0,x.cn)({"w-[238px] min-w-[238px] max-w-[238px] p-0":l}),children:[(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.Ou,{controllerArgs:{name:"num_images",control:v.control}})}),(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.oM,{variant:"input",aspectRatios:L,isEnabled:b.aspect_ratio_enabled,isSubscriptionActive:t,controllerArgs:{name:"aspect_ratio",control:v.control}})}),(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.kk,{controllerArgs:{name:"model",control:v.control},settings:S,popularSettings:T,favoriteSettings:N,defaultSetting:C,toggleFavorite:w,onClickEventFire:e=>{m.c.triggerEventUsingElementId(n.i.TEXT_TO_IMAGE_MODEL,e,{[n.L.TOOL_USED]:p})},asModal:l,modalContainer:i},"fromTextModels")}),(0,r.jsxs)(g.Rp.Item,{children:[(0,r.jsx)(g.RM,{controllerArgs:{name:"style",control:v.control},settings:y,popularSettings:_,favoriteSettings:h,defaultSetting:I,toggleFavorite:w,onClickEventFire:e=>{m.c.triggerEventUsingElementId(n.i.TEXT_TO_IMAGE_STYLE,e,{[n.L.TOOL_USED]:p})},asModal:l,modalContainer:i},"fromTextArtStyle"),(0,r.jsx)(g.yM,{controllerArgs:{name:"high_res_results",control:v.control},isEnabled:b.hdr_toggle})]}),(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.K0,{formHook:v,name:"negative_prompt"})}),(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.f0,{controllerArgs:{name:"cfg",control:v.control},cfgEnabled:b.cfg_enabled})}),(0,r.jsx)(g.Rp.Item,{children:(0,r.jsx)(g.H7,{formHook:v,name:"seed"})})]})}},5672:function(e,t,l){"use strict";l.d(t,{TI:function(){return n},cg:function(){return i},yn:function(){return a}});var r=l(67259);let a=(e,t)=>(0,r.Qt)(e,t),n=(0,r.hB)(a),i=(0,r.hB)(a)}}]);